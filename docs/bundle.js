!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";d3.selection.prototype.sideEffects=function(e){var t=this.nodes().map(function(e){var t=d3.select(e),n=t.datum(),r=0,a=0,l=d3.scaleLinear(),i=(d3.scaleBand(),d3.scaleOrdinal(),null),o=null,u=null,s=null,c=null,d={init:function(){i=t.append("svg.multipleMethods-chart"),(s=i.append("g")).at("transform","translate(0, 30)"),o=s.append("g.g-axis"),u=s.append("g.g-vis"),c=u.selectAll(".g-bar").data(n.values).enter().append("g").attr("class","g-bar"),d.resize(),d.render()},resize:function(){return r=t.node().offsetWidth-0-50,a=90,i.at({width:r+0+50,height:a+30+5}),l.domain([0,75]).range([0,r-50-0]),s.at("transform","translate(0, 30)"),d},render:function(){o.call(d3.axisTop(l).ticks(6).tickSize(-a-10).tickSizeOuter(0).tickFormat(function(e,t){return this.parentNode.nextSibling?e:e+"%"}).tickPadding(10)).attr("transform","translate(5, -10)");var e=c.selectAll(".bar").data(function(e){return[e]});console.log({barGroups:c,bars:e});var t=e.enter().append("rect").attr("class","bar");e.exit().remove,t.merge(e).attr("width",function(e){return l(e.percent)}).attr("height",10).attr("transform","translate(5, 0)");var n=c.selectAll(".g-label").data(function(e){return[e]}),r=n.enter().append("g");return n.exit().remove,r.merge(n).attr("class","g-label"),r.append("text").attr("class",function(e){return"label-text-bg tk-atlas"}).text(function(e){return e.label}).attr("transform","translate(6, 3)").style("text-transform","uppercase").style("font-size",12).attr("alignment-baseline","hanging"),r.append("text").attr("class",function(e){return"label-text tk-atlas"}).text(function(e){return e.label}).attr("transform","translate(6, 0)").style("text-transform","uppercase").style("font-size",12).attr("alignment-baseline","hanging"),r.attr("transform",function(e){return"translate("+(l(e.percent)+6)+", 0)"}),c.attr("transform",function(e,t){return"translate(0, "+18*t+")"}),d},data:function(e){return arguments.length?(n=e,t.datum(n),d.render(),d):n}};return d.init(),d});return t.length>1?t:t.pop()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(0);var a=null,l=d3.selectAll(".graphic-sideEffects"),i=[{number:3,label:"too difficult to use"},{number:5,label:"partner did not like it"},{number:6,label:"side effects"},{number:7,label:"worried about side effects"},{number:8,label:"worried it would fail"},{number:9,label:"method failed"},{number:12,label:"less sexual pleasure"},{number:14,label:"changes to menstrual cycle"},{number:15,label:"other"}],o=[{method:"Condom",values:[{number:1,label:"allergy"},{number:2,label:"didn't like it"},{number:3,label:"pain or discomfort"},{number:5,label:"worried it would fail"},{number:9,label:"other"}]},{method:"Depo-Provera",values:[{number:1,label:"weight gain"},{number:2,label:"bleeding problems"},{number:4,label:"mood swings/depression"},{number:5,label:"hair loss/growth"},{number:15,label:"other"}]},{method:"IUD",values:[{number:2,label:"bleeding problems"},{number:6,label:"vaginal infection"},{number:7,label:"abdominal pain/cramping"},{number:11,label:"IUD moved/was expelled"},{number:12,label:"other"}]},{method:"The Pill",values:[{number:1,label:"Can't remember to take it"},{number:3,label:"weight gain"},{number:5,label:"mood swings/depression"},{number:6,label:"bleeding problems"},{number:8,label:"nausea/sickness"}]}];function u(){var e=a.map(function(e){return r({},e,{label:function(e,t,n){var r=d3.map(i,function(e){return e.number});if("general"==e)return r.get(n).label;if("specific"==e){var a=o.filter(function(e){return e.method==t});return d3.map(a[0].values,function(e){return e.number}).get(n).label}}(e.type,e.stopMethod,e.reason)})}),t=d3.select(this).selectAll(".container-sideEffects"),n=t.at("data-type"),l=e.filter(function(e){return e.type==n}),u=d3.nest().key(function(e){return e.stopMethod}).entries(l);console.log({typeData:l,type:n}),t.selectAll(".chart").data(u).enter().append("div.chart").sideEffects()}t.default={init:function(){d3.loadData("assets/data/sideEffects.csv",function(e,t){var n;n=t[0],a=n.map(function(e,t){return r({},e,{stopMethod:e.stopMethod,reason:+e.reason,total:+e.total,percent:+e.percent,type:e.type})}),l.each(u)})},resize:function(){null.resize(),null.render()}}},function(e,t,n){"use strict";d3.selection.prototype.multipleMethods=function(e){var t=this.nodes().map(function(e){var t=d3.select(e),n=t.datum()[0],r=t.datum()[1],a=0,l=0,i=!1,o=230,u=null,s=null,c=d3.scaleLinear(),d=(d3.scaleBand(),d3.scaleOrdinal()),f=null,p=null,m=null,h=null,g=null,b={init:function(){f=t.append("svg.multipleMethods-chart"),(h=f.append("g")).at("transform","translate("+o+", 30)"),p=h.append("g.g-axis"),m=h.append("g.g-vis"),g=m.selectAll(".g-bar").data(n).enter().append("g").attr("class","g-bar"),b.resize(),b.render()},resize:function(){var e=window.innerWidth;return o=(i=e<500)?150:270,u=i?20:15,s=i?30:15,a=t.node().offsetWidth-o-15,l=10*u+10*s,f.at({width:a+o+15,height:l+30+10}),c.domain([0,d3.max(n,function(e){return e.uniqueR})]).range([0,a-15]),d.domain(["72 - 87%","88 - 98%",">99%"]).range(["#DDB2C2","#C169D4","#5E32FF"]),h.at("transform","translate("+o+", 30)"),b},render:function(){p.call(d3.axisTop(c).ticks(i?3:5).tickSize(-l-10).tickSizeOuter(0).tickFormat(function(e,t){return 0==t?e+" users":e}).tickPadding(10)).attr("transform","translate(5, -10)");var e=d3.map(r,function(e){return e.full}),t=g.selectAll(".bar").data(function(e){return[e]}),n=t.enter().append("rect").attr("class","bar");t.exit().remove,n.merge(t).attr("width",function(e){return c(e.uniqueR)}).attr("height",u).attr("transform","translate(5, 0)");var a=g.selectAll(".g-label").data(function(e){return e.annotation.values}),o=a.enter().append("g");a.exit().remove,o.merge(a).attr("class","g-label").classed("narrow",!!i),o.append("text").attr("class",function(e){return"+"==e?"label-text label-text-plus tk-atlas":"label-text tk-atlas"}).text(function(e){return e}).attr("transform","translate(6, 3)").style("text-transform","uppercase").style("font-size",12).style("font-weight",600).attr("alignment-baseline","hanging"),o.append("rect").attr("class","label-rect").attr("width",function(e){return d3.select(this.parentNode).selectAll(".label-text").node().getBBox().width+12}).attr("height",18).style("fill",function(t){if("+"==t)return"none";var n=function(e){var t=100-e;return t>=99?">99%":t<99&&t>=88?"88 - 98%":t<88?"72 - 87%":void 0}(e.get(t).failure);return""+d(n)}).attr("rx",5).attr("ry",5).lower();var f=m.selectAll(".g-label").nodes().map(function(e,t){var n=e.getBBox().width;return{bboxWidth:n,self:n+6}});return m.selectAll(".g-label").attr("transform",function(e,t){var n=t%3,r=f[t].self,a=null;if(0===n?a=f[t+1].bboxWidth+f[t+2].bboxWidth+r:1===n?a=f[t+1].bboxWidth+r:2===n&&(a=r),0==i)return"translate("+-a+", "+-3+")";if(1==i){var l=null;return 0===n||1===n?l=0:2===n&&(l=18),"translate("+-r+", "+l+")"}}),g.attr("transform",function(e,t){return"translate(0, "+t*(u+s)+")"}),g.selectAll(".bar"),b},data:function(e){return arguments.length?(n=e,t.datum(n),b.render(),b):n}};return b.init(),b});return t.length>1?t:t.pop()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(2);var a=d3.selectAll(".multiple_methods"),l=null,i=[{short:"3",full:"The Pill",failure:9},{short:"4",full:"Condom",failure:18},{short:"6",full:"Female Sterilization",failure:.5},{short:"7",full:"Withdrawal",failure:22},{short:"8",full:"Depo-Provera",failure:6},{short:"10",full:"Calendar Method",failure:24},{short:"12",full:"Diaphragm",failure:12},{short:"19",full:"IUD",failure:.8},{short:"20",full:"Emergency",failure:10}],o=d3.map(i,function(e){return e.short});t.default={init:function(){d3.loadData("assets/data/multipleMethods.csv",function(e,t){var n,u;n=t[0],u=n.map(function(e,t){return r({},e,{m1:e.m1,name1:o.get(e.m1).full,m2:e.m2,name2:o.get(e.m2).full,uniqueR:+e.uniqueR,effectiveness1:100-o.get(e.m1).failure,effectiveness2:100-o.get(e.m2).failure})}).map(function(e){return r({},e,{annotation:{values:[e.name1,"+",e.name2]}})}),l=a.selectAll(".graphic").datum([u,i]).multipleMethods()})},resize:function(){l.resize(),l.render()}}},function(e,t,n){"use strict";d3.selection.prototype.over_time=function(e){var t=this.nodes().map(function(e){var t=d3.select(e),n=t.datum(),r=0,a=0,l=d3.scaleLinear(),i=d3.scaleLinear(),o=d3.area(),u=d3.line(),s=null,c=null,d=null,f=null,p={init:function(){f=t.append("div.title");var e=(s=t.append("svg.overTime-chart")).append("g");e.at("transform","translate(25, 5)"),c=e.append("g.g-axis"),d=e.append("g.g-vis"),p.resize(),p.render()},resize:function(){return r=t.node().offsetWidth-25-10,a=t.node().offsetHeight-5-50,s.at({width:r+25+10,height:a+5+50}),l.domain([15,45]).rangeRound([0,r]),i.domain([0,31]).rangeRound([a,0]),p},render:function(){return f.append("text").text(n.key),o.x(function(e){return l(e.calcAge)}).y0(a).y1(function(e){return i(e.percent)}),u.x(function(e){return l(e.calcAge)}).y(function(e){return i(e.percent)}),c.append("g").attr("class","axis-y axis").call(d3.axisLeft(i).ticks(3).tickSize(-r).tickSizeOuter(0).tickPadding(5).tickFormat(function(e){return e+"%"})),c.append("g.axis-x").selectAll(".axis-x-values").data([15,"Age",45]).enter().append("text").attr("class","axis-x-values").text(function(e){return e}).attr("transform",function(e){return"translate("+l("Age"==e?30:e)+", "+(a+10)+")"}).attr("text-anchor","middle").attr("alignment-baseline","hanging"),d.append("path").data([n.values]).attr("class","area overTime-area").attr("d",o),d.append("path").data([n.values]).attr("class","line overTime-line").attr("d",u),p},data:function(e){return arguments.length?(n=e,t.datum(n),p.render(),p):n}};return p.init(),p});return t.length>1?t:t.pop()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(4);var a=null,l=d3.selectAll(".container-over_time"),i=d3.map([{short:"3",full:"The Pill"},{short:"4",full:"Condom"},{short:"5",full:"Partner's Vasectomy"},{short:"6",full:"Female Sterilization"},{short:"7",full:"Withdrawal"},{short:"8",full:"Depo-Provera"},{short:"9",full:"Hormonal Implant"},{short:"10",full:"Calendar Method"},{short:"11",full:"Sympto-Thermal"},{short:"12",full:"Diaphragm"},{short:"19",full:"IUD"},{short:"20",full:"Emergency"},{short:"25",full:"Patch"},{short:"26",full:"Vaginal Ring"}],function(e){return e.short});t.default={init:function(){d3.loadData("assets/data/overTime.csv",function(e,t){var n,o,u;n=t[0],a=n.map(function(e,t){return r({},e,{method:e.method,calcAge:+e.calcAge,percent:+e.percent,name:i.get(e.method).full})}),o=l,u=d3.nest().key(function(e){return e.name}).entries(a).map(function(e){var t=e.values.shift().percent;return{key:e.key,values:e.values,first:t}}).sort(function(e,t){return d3.descending(e.first,t.first)}),o.selectAll(".chart").data(u).enter().append("div.chart").over_time()})},resize:function(){}}},function(e,t,n){"use strict";d3.selection.prototype.firstTime=function(e){var t=this.nodes().map(function(e){var t=d3.select(e),n=t.datum(),r=null,a=240,l=260,i=d3.scaleBand(),o=d3.scaleLinear(),u=d3.line(),s=null,c=null,d=null,f={init:function(){var e=(s=t.append("svg.firstTime-chart")).append("g");e.at("transform","translate(35, 20)"),c=e.append("g.g-axis"),d=e.append("g.g-vis"),r=d3.nest().key(function(e){return e.method}).entries(n),f.resize(),f.render()},resize:function(){a=t.node().offsetWidth-35-35,l=t.node().offsetHeight-20-10,s.at({width:a+35+35,height:l+20+10});var e=l-10-20;return i.domain(["70's","80's","90's","00's","10's"]).rangeRound([0,a-35]),o.domain([0,80]).range([e,0]),f},render:function(){u.x(function(e){return i(e.decade)}).y(function(e){return o(e.percent)}),c.append("g").attr("transform","translate(-25, "+(l-10-20)+")").attr("class","axis-x axis").call(d3.axisBottom(i).tickSize(0,0).tickSizeInner(0).tickSizeOuter(0).tickPadding(10)),c.append("g").attr("class","axis-y axis").call(d3.axisLeft(o).ticks(4).tickSize(35-a+35).tickPadding(10).tickFormat(function(e){return e+"%"}));var e=d.selectAll(".groups-firstTime").data(r).enter().append("g").attr("class","groups-firstTime");return e.append("path").attr("class",function(e){return"line-firstTime line line-"+e.key}).attr("d",function(e){return u(e.values)}),e.append("text").attr("class",function(e){return"label-firstTime label label-"+e.key}).text(function(e){return 3==e.key?"Condoms":4==e.key?"The Pill":8==e.key?"Depo-Provera":null}).attr("transform",function(e){var t=e.values.pop();return"translate("+(i("10's")+5)+", "+o(t.percent)+")"}).attr("alignment-baseline","middle"),f},data:function(e){return arguments.length?(n=e,t.datum(n),f.render(),f):n}};return f.init(),f});return t.length>1?t:t.pop()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(6);var a=null,l=d3.selectAll(".firstTime");t.default={init:function(){d3.loadData("assets/data/firstTime.csv",function(e,t){var n;n=t[0],a=n.map(function(e,t){return r({},e,{method:e.method,decade:e.decade,percent:+e.percent})}),l.selectAll(".graphic-half").datum(a).firstTime()})},resize:function(){}}},function(e,t,n){"use strict";d3.selection.prototype.ever_used=function(e){var t=this.nodes().map(function(e){var t=d3.select(e),n=t.datum(),r=null,a=null,l=null,i={init:function(){r=t.append("div.blocks"),a=t.append("text.title"),l=t.append("text.sub"),i.resize(),i.render()},resize:function(){return i},render:function(){var e=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array(100).keys())).map(function(e){return{number:e,state:e<n.percent?"true":"false"}});return r.selectAll(".data-block").data(e).enter().append("div").attr("class",function(e,t){return"data-block data-block-"+e.state}),a.text(n.name).classed("tk-atlas",!0),l.text(n.percent+"%").classed("tk-atlas",!0),i},data:function(e){return arguments.length?(n=e,t.datum(n),i.render(),i):n}};return i.init(),i});return t.length>1?t:t.pop()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n(8);var a=null,l=d3.selectAll(".container-ever_used"),i=d3.map([{short:"CONDOM",full:"condom"},{short:"DEPOPROV",full:"Depo-Provera"},{short:"IUD",full:"IUD"},{short:"MORNPILL",full:"Emergency Contraception"},{short:"PATCH",full:"Patch"},{short:"PILL",full:"The Pill"},{short:"RHYTHM",full:"Calendar Method"},{short:"RING",full:"Vaginal Ring"},{short:"SDAYCBDS",full:"Standard Days"},{short:"TEMPSAFE",full:"Sympto-Thermal Method"},{short:"VASECTMY",full:"Partner's Vasectomy"},{short:"WIDRAWAL",full:"Withdrawal"}],function(e){return e.short});t.default={init:function(){d3.loadData("assets/data/everused.csv",function(e,t){var n;a=(n=t[0],n.map(function(e,t){return r({},e,{cleanMethod:e.cleanMethod,usage:e.usage,count:+e.count,percent:+e.percent,name:i.get(e.cleanMethod).full})})).sort(function(e,t){return d3.descending(e.percent,t.percent)}),l.selectAll(".chart").data(a).enter().append("div.chart").ever_used()})},resize:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={init:function(){console.log("Make something awesome!")},resize:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}};t.default=r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){var n=NaN,r="[object Symbol]",a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,d=s||c||Function("return this")(),f=Object.prototype.toString,p=Math.max,m=Math.min,h=function(){return d.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==r}(e))return n;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var s=i.test(e);return s||o.test(e)?u(e.slice(2),s?2:8):l.test(e)?n:+e}e.exports=function(e,t,n){var r,a,l,i,o,u,s=0,c=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,l=a;return r=a=void 0,s=t,i=e.apply(l,n)}function y(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-s>=l}function x(){var e=h();if(y(e))return k(e);o=setTimeout(x,function(e){var n=t-(e-u);return d?m(n,l-(e-s)):n}(e))}function k(e){return o=void 0,f&&r?v(e):(r=a=void 0,i)}function w(){var e=h(),n=y(e);if(r=arguments,a=this,u=e,n){if(void 0===o)return function(e){return s=e,o=setTimeout(x,t),c?v(e):i}(u);if(d)return o=setTimeout(x,t),v(u)}return void 0===o&&(o=setTimeout(x,t)),i}return t=b(t)||0,g(n)&&(c=!!n.leading,l=(d="maxWait"in n)?p(b(n.maxWait)||0,t):l,f="trailing"in n?!!n.trailing:f),w.cancel=function(){void 0!==o&&clearTimeout(o),s=0,r=u=a=o=void 0},w.flush=function(){return void 0===o?i:k(h())},w}}).call(this,n(12))},function(e,t,n){"use strict";var r=d(n(13)),a=d(n(11)),l=d(n(10)),i=d(n(9)),o=d(n(7)),u=d(n(5)),s=d(n(3)),c=d(n(1));function d(e){return e&&e.__esModule?e:{default:e}}var f=d3.select("body"),p=0;f.classed("is-mobile",a.default.any()),window.addEventListener("resize",(0,r.default)(function(){var e=f.node().offsetWidth;p!==e&&(p=e,l.default.resize(),o.default.resize(),s.default.resize())},150)),function(){if(f.select("header").classed("is-sticky")){var e=f.select(".header__menu"),t=f.select(".header__toggle");t.on("click",function(){var n=e.classed("is-visible");e.classed("is-visible",!n),t.classed("is-visible",!n)})}}(),l.default.init(),i.default.init(),o.default.init(),u.default.init(),s.default.init(),c.default.init()}]);